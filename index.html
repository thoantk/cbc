<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <!--meta name="viewport" content="width=device-width, initial-scale=1.0"-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
        rel="stylesheet">
    <link href="asset/css/style.css" rel="stylesheet">
    <title>Cân Bằng chuyền</title>
</head>

<body>
    <header class="site-header">
        <h1>Thông tin sản xuất chuyền may</h1>
        <h4>Tổ may 3 - DECATHLON - 352923 AW25</h4>
    </header>
    <main>
        <div class="row1 d-flex gap1vw align-bottom">
            <div class="box1">
                <div class="d-flex space-between item1">
                    <div class="ct1">
                        <div class="icon">
                            <svg width="125" height="100" viewBox="0 0 125 100" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M106.25 43.75C97.6172 43.75 90.625 50.7422 90.625 59.375C90.625 68.0078 97.6172 75 106.25 75C114.883 75 121.875 68.0078 121.875 59.375C121.875 50.7422 114.883 43.75 106.25 43.75ZM106.25 68.75C101.074 68.75 96.875 64.5508 96.875 59.375C96.875 54.1992 101.074 50 106.25 50C111.426 50 115.625 54.1992 115.625 59.375C115.625 64.5508 111.426 68.75 106.25 68.75ZM46.875 59.375C46.875 68.0078 53.8672 75 62.5 75C71.1328 75 78.125 68.0078 78.125 59.375C78.125 50.7422 71.1328 43.75 62.5 43.75C53.8672 43.75 46.875 50.7422 46.875 59.375ZM71.875 59.375C71.875 64.5508 67.6758 68.75 62.5 68.75C57.3242 68.75 53.125 64.5508 53.125 59.375C53.125 54.1992 57.3242 50 62.5 50C67.6758 50 71.875 54.1992 71.875 59.375ZM18.75 75C27.3828 75 34.375 68.0078 34.375 59.375C34.375 50.7422 27.3828 43.75 18.75 43.75C10.1172 43.75 3.125 50.7422 3.125 59.375C3.125 68.0078 10.1172 75 18.75 75ZM18.75 50C23.9258 50 28.125 54.1992 28.125 59.375C28.125 64.5508 23.9258 68.75 18.75 68.75C13.5742 68.75 9.375 64.5508 9.375 59.375C9.375 54.1992 13.5742 50 18.75 50ZM110.156 81.25H102.344C94.1601 81.25 87.5 88.2617 87.5 96.875C87.5 98.5937 88.9062 100 90.625 100C92.3437 100 93.75 98.5937 93.75 96.875C93.75 91.6992 97.6172 87.5 102.344 87.5H110.156C114.883 87.5 118.75 91.6992 118.75 96.875C118.75 98.5937 120.156 100 121.875 100C123.594 100 125 98.5937 125 96.875C125 88.2617 118.34 81.25 110.156 81.25ZM22.6562 81.25H14.8437C6.66015 81.25 0 88.2617 0 96.875C0 98.5937 1.40625 100 3.125 100C4.84375 100 6.25 98.5937 6.25 96.875C6.25 91.6992 10.1172 87.5 14.8437 87.5H22.6562C27.3828 87.5 31.25 91.6992 31.25 96.875C31.25 98.5937 32.6562 100 34.375 100C36.0937 100 37.5 98.5937 37.5 96.875C37.5 88.2617 30.8398 81.25 22.6562 81.25ZM66.4062 81.25H58.5937C50.4101 81.25 43.75 88.2617 43.75 96.875C43.75 98.5937 45.1562 100 46.875 100C48.5937 100 50 98.5937 50 96.875C50 91.6992 53.8672 87.5 58.5937 87.5H66.4062C71.1328 87.5 75 91.6992 75 96.875C75 98.5937 76.4062 100 78.125 100C79.8437 100 81.25 98.5937 81.25 96.875C81.25 88.2617 74.5898 81.25 66.4062 81.25ZM12.5 9.375C12.5 7.65039 13.9043 6.25 15.625 6.25H109.375C111.096 6.25 112.5 7.65039 112.5 9.375V38.5195C114.748 39.1953 116.869 40.1523 118.75 41.4707V9.375C118.75 4.20508 114.545 0 109.375 0H15.625C10.4551 0 6.25 4.20508 6.25 9.375V41.4707C8.13086 40.1523 10.252 39.1973 12.5 38.5195V9.375Z"
                                    fill="white" />
                            </svg>
                        </div>
                        <h3 class="title">Lao động</h3>
                    </div>
                    <span class="line"></span>
                    <div class="ct2">
                        <div class="valuelight">38/40</div>
                        <div class="subvalue">Vắng: <span class="red">2</span></div>
                    </div>
                </div>
                <div class="d-flex space-between item1">
                    <div class="ct1">
                        <div class="icon">
                            <svg width="101" height="101" viewBox="0 0 101 101" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M100.5 50.5026C100.5 48.5534 99.365 46.8034 97.615 46.0475L78.1348 37.5965L97.6072 29.1474C99.365 28.3876 100.5 26.6396 100.5 24.6923C100.5 22.7451 99.365 20.9971 97.615 20.2412L53.6136 1.15161C51.641 0.284428 49.3734 0.282475 47.3891 1.1477L3.39352 20.2393C1.63573 20.999 0.500977 22.747 0.500977 24.6943C0.500977 26.6415 1.63573 28.3896 3.38571 29.1454L22.864 37.5984L3.39157 46.0475C1.63573 46.8053 0.500977 48.5534 0.500977 50.5026C0.500977 52.4498 1.63573 54.1978 3.38571 54.9537L22.862 63.4028L3.39157 71.85C1.63573 72.6117 0.500977 74.3597 0.500977 76.3089C0.500977 78.2561 1.63573 80.0042 3.38571 80.76L47.393 99.8535C48.3731 100.279 49.43 100.499 50.4984 100.5C51.557 100.5 52.6156 100.285 53.6038 99.8535L97.6053 80.7639C99.363 80.0042 100.498 78.2561 100.498 76.3089C100.498 74.3597 99.3631 72.6097 97.6131 71.8539L78.1367 63.4047L97.6072 54.9576C99.365 54.1978 100.5 52.4498 100.5 50.5026ZM9.33485 24.6943L49.9652 7.0656L49.9711 7.06169C50.3109 6.92302 50.684 6.91325 51.0355 7.0656L91.6659 24.6943L51.0355 42.3249C50.682 42.4753 50.3051 42.4753 49.9652 42.3249L9.33485 24.6943ZM91.6659 76.3089L51.0355 93.9376C50.682 94.088 50.3051 94.088 49.9652 93.9376L9.33485 76.3069L30.9674 66.9203L47.3949 74.0472C48.3751 74.4724 49.4319 74.6924 50.5004 74.6937C51.5589 74.6937 52.6175 74.4788 53.6058 74.0472L70.0333 66.9203L91.6659 76.3089ZM51.0355 68.1312C50.682 68.2816 50.3051 68.2816 49.9652 68.1312L9.33485 50.5006L30.9694 41.114L47.3949 48.2428C48.3751 48.6681 49.4319 48.8881 50.5004 48.8893C51.5589 48.8893 52.6175 48.6745 53.6058 48.2428L70.0314 41.116L91.6659 50.5045L51.0355 68.1312Z"
                                    fill="white" />
                            </svg>
                        </div>
                        <h3 class="title">SL ngày (chiếc)</h3>
                    </div>
                    <span class="line"></span>
                    <div class="ct2">
                        <div class="valuelight">100/260</div>
                        <div class="subvalue">Chênh: <span class="red">-160</span></div>
                    </div>
                </div>
                <div class="d-flex space-between item1">
                    <div class="ct1">
                        <div class="icon">
                            <svg width="101" height="101" viewBox="0 0 101 101" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M100.5 50.5026C100.5 48.5534 99.365 46.8034 97.615 46.0475L78.1348 37.5965L97.6072 29.1474C99.365 28.3876 100.5 26.6396 100.5 24.6923C100.5 22.7451 99.365 20.9971 97.615 20.2412L53.6136 1.15161C51.641 0.284428 49.3734 0.282475 47.3891 1.1477L3.39352 20.2393C1.63573 20.999 0.500977 22.747 0.500977 24.6943C0.500977 26.6415 1.63573 28.3896 3.38571 29.1454L22.864 37.5984L3.39157 46.0475C1.63573 46.8053 0.500977 48.5534 0.500977 50.5026C0.500977 52.4498 1.63573 54.1978 3.38571 54.9537L22.862 63.4028L3.39157 71.85C1.63573 72.6117 0.500977 74.3597 0.500977 76.3089C0.500977 78.2561 1.63573 80.0042 3.38571 80.76L47.393 99.8535C48.3731 100.279 49.43 100.499 50.4984 100.5C51.557 100.5 52.6156 100.285 53.6038 99.8535L97.6053 80.7639C99.363 80.0042 100.498 78.2561 100.498 76.3089C100.498 74.3597 99.3631 72.6097 97.6131 71.8539L78.1367 63.4047L97.6072 54.9576C99.365 54.1978 100.5 52.4498 100.5 50.5026ZM9.33485 24.6943L49.9652 7.0656L49.9711 7.06169C50.3109 6.92302 50.684 6.91325 51.0355 7.0656L91.6659 24.6943L51.0355 42.3249C50.682 42.4753 50.3051 42.4753 49.9652 42.3249L9.33485 24.6943ZM91.6659 76.3089L51.0355 93.9376C50.682 94.088 50.3051 94.088 49.9652 93.9376L9.33485 76.3069L30.9674 66.9203L47.3949 74.0472C48.3751 74.4724 49.4319 74.6924 50.5004 74.6937C51.5589 74.6937 52.6175 74.4788 53.6058 74.0472L70.0333 66.9203L91.6659 76.3089ZM51.0355 68.1312C50.682 68.2816 50.3051 68.2816 49.9652 68.1312L9.33485 50.5006L30.9694 41.114L47.3949 48.2428C48.3751 48.6681 49.4319 48.8881 50.5004 48.8893C51.5589 48.8893 52.6175 48.6745 53.6058 48.2428L70.0314 41.116L91.6659 50.5045L51.0355 68.1312Z"
                                    fill="white" />
                            </svg>
                        </div>
                        <h3 class="title">BTP (chiếc)</h3>
                    </div>
                    <span class="line"></span>
                    <div class="ct2">
                        <div class="valuelight">800/1000</div>
                        <div class="subvalue">Vốn: <span class="blue-light">0.8</span></div>
                    </div>
                </div>
            </div>
            <div class="box2">
                <div class="box2top d-flex">
                    <div class="item">
                        <div class="content">
                            <h2 class="titlevalue">RTF</h2>
                            <div class="valuelight blue-light">90%</div>
                        </div>
                        <img src="asset/images/bg-time.png" alt="image">
                    </div>
                    <div class="item">
                        <div class="content">
                            <h2 class="titlevalue">Takt time</h2>
                            <div class="valuelight red">200s</div>
                        </div>
                        <img src="asset/images/bg-time.png" alt="image">
                    </div>
                    <div class="item">
                        <div class="content">
                            <h2 class="titlevalue">Cycle time</h2>
                            <div class="valuelight blue-light">299s</div>
                        </div>
                        <img src="asset/images/bg-time.png" alt="image">
                    </div>
                </div>
                <div class="box2bottom boxcard">
                    <div class="d-flex space-between">
                        <h2>Cụm sản lượng thấp</h2>
                        <div class="cg-bieudo d-flex">
                            <div class="cg-text">
                                <div>
                                    < 50 </div>
                                        <div class="nhan" style="--color-nhan:#F93232"></div>
                                </div>
                                <div class="cg-text">
                                    <div> 50-200 </div>
                                    <div class="nhan" style="--color-nhan:#004EEB"></div>
                                </div>
                                <div class="cg-text">
                                    <div> >200 </div>
                                    <div class="nhan" style="--color-nhan:rgba(0, 64, 193, 0.4)"></div>
                                </div>
                            </div>
                        </div>
                        <div class="data-cum">
                            <div class="itemhang">
                                <span></span>
                                <span></span>
                                <span class="tb"></span>
                                <span></span>
                                <span class="cb">45</span>
                                <span></span>
                                <span></span>
                                <span></span>
                                <span class="tb"></span>
                                <span></span>
                            </div>
                            <div class="itemhang">
                                <span class="cb">30</span>
                                <span class="tb"></span>
                                <span></span>
                                <span class="tb"></span>
                                <span></span>
                                <span></span>
                                <span></span>
                                <span></span>
                                <span></span>
                                <span></span>
                            </div>
                            <div class="itemhang">
                                <span class="tb"></span>
                                <span></span>
                                <span class="cb">20</span>
                                <span></span>
                                <span></span>
                                <span class="tb"></span>
                                <span></span>
                                <span></span>
                                <span class="cb">40</span>
                                <span></span>
                            </div>
                            <div class="itemhang">
                                <span></span>
                                <span class="cb">20</span>
                                <span></span>
                                <span class="tb"></span>
                                <span></span>
                                <span class="cb">46</span>
                                <span></span>
                                <span></span>
                                <span class="tb"></span>
                                <span class="cb">39</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="box3">
                    <div class="bieudo">
                        <h3 class="title-bieudo">Lỗi Chất lượng</h3>
                        <div class="cava-bieudo">
                            <canvas id="loichatluong"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row2 d-flex gap1vw">
                <div class="box1">
                    <div class="bieudo">
                        <h3 class="title-bieudo">Hiệu Suất(%)</h3>
                        <div class="chugiai">
                            <div class="label d-flex"><span class="mau" style="--color-bieudo:grey"></span>Hôm qua:
                                <span class="info">90%</span></div>
                            <div class="label d-flex"><span class="mau" style="--color-bieudo:#1DACF2"></span>Hôm nay:
                                <span class="info blue-light">85%</span></div>
                        </div>
                        <div class="cava-bieudo bieudo-hieusuat">
                            <div id="hieusuat"></div>
                        </div>
                    </div>
                </div>
                <div class="box4">
                    <div class="bieudo">
                        <h3 class="title-bieudo">Cân bằng chuyền</h3>
                        <h3 class="text-bieudo">Định mức cân bằng: <span class="blue-light">260</span></h3>
                        <div class="cava-bieudo">
                            <canvas id="canbangchuyen"></canvas>
                        </div>
                    </div>
                </div>
            </div>

    </main>

    <footer>

        <div class="row3">
            <div class="top3 d-flex space-between">
                <label>TOP THU NHẬP CAO</label>
                <span class="line"></span>
                <div class="tenthunhap d-flex space-between">
                    <span>Nguyễn Văn A</span>
                    <span class="special"><svg width="25" height="25" viewBox="0 0 48 46" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M23.8486 0.575317L29.4615 17.8499H47.625L32.9304 28.5262L38.5433 45.8007L23.8486 35.1245L9.154 45.8007L14.7669 28.5262L0.0722198 17.8499H18.2358L23.8486 0.575317Z"
                                fill="white" />
                        </svg>
                    </span>
                    <span>Nguyễn Văn B</span>
                    <span class="special"><svg width="25" height="25" viewBox="0 0 48 46" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M23.8486 0.575317L29.4615 17.8499H47.625L32.9304 28.5262L38.5433 45.8007L23.8486 35.1245L9.154 45.8007L14.7669 28.5262L0.0722198 17.8499H18.2358L23.8486 0.575317Z"
                                fill="white" />
                        </svg>
                    </span>
                    <span>Nguyễn Văn C</span>
                </div>
            </div>
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@2.2.1"></script>


    <script>

        ///////////////////////////////////////////////
        /* ---- */
        const data2 = {
            labels: [
                'Bỏ mũi',
                'Dây treo...',
                'Đứt chỉ...',
            ],
            datasets: [{
                type: 'bar',
                label: 'Số lượng lỗi',
                data: [10, 15, 11,],
                backgroundColor: '#1DACF2', color: 'white',
                yAxisID: 'y',
                borderRadius: 8, barThickness: 50,
            }, {
                type: 'line',
                label: 'Tỉ lệ lỗi (%)',
                data: [20, 35, 45,],
                fill: false,
                borderColor: 'rgb(255, 99, 132)', color: 'white',
                yAxisID: 'y1',
                borderRadius: 8,
            }]
        };

        const config2 = {
            type: 'bar',
            data: data2,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        labels: {
                            color: 'white',   // Màu chữ chú giải
                            font: {
                                size: 12,
                            }
                        }
                    },
                    datalabels: {
                        color: 'white',    // Màu chữ trên cột
                        anchor: 'end',
                        align: 'start',
                        formatter: (value, context) => {
                            // Nếu là dataset line (tỉ lệ lỗi %)
                            if (context.dataset.label === 'Tỉ lệ lỗi (%)') {
                                return value.toFixed(0) + '%';
                            }
                            // Nếu là dataset bar (số lượng lỗi)
                            if (context.dataset.label === 'Số lượng lỗi') {
                                return value; // không thêm %
                            }
                            return value;
                        },
                        font: {
                            size: 20
                        }
                    }
                },
                scales: {
                    x: {
                        ticks: {
                            color: 'white',   // màu chữ trục X
                            font: {
                                size: 20,
                                weight: '500'
                            }
                        },
                        title: {
                            display: false,
                            text: 'Loại lỗi',
                            color: 'white'    // màu chữ tiêu đề trục X
                        }
                    },
                    y: {
                        ticks: {
                            color: 'white',     // màu chữ trục Y bên trái
                            font: {
                                size: 20,
                                weight: '500'
                            }
                        },
                        title: {
                            display: true,
                            text: 'Số lượng lỗi',
                            color: 'white'      // màu chữ tiêu đề trục Y
                        }
                    },
                    y1: {
                        ticks: {
                            color: 'white',  // màu chữ trục Y bên phải
                            font: {
                                size: 20,
                                weight: '500'
                            }
                        },
                        title: {
                            display: true,
                            text: 'Tỉ lệ lỗi (%)',
                            color: 'white'   // màu chữ tiêu đề trục Y1
                        },
                        min: 0,
                        max: 100,
                        position: 'right'
                    }
                }
            },
            plugins: [ChartDataLabels]
        };
        new Chart(document.getElementById('loichatluong')
            , config2)
        ///can bang chuyen
        const plan = 260; // Kế hoạch cố định
        const actual = [264, 250, 220, 220, 220, 155, 122]; // Số thực tế
        const labels = ['Cấp BTP', 'May Lót', 'May Túi', 'Tra Khóa', 'Mí Nẹp', 'KCS EndLine'];

        // Tính % hoàn thành
        const percents = actual.map(val => val / plan);

        // Hàm gán màu theo % hoàn thành
        // function getColor(p) {
        //     if (p > 1) return '#1dacf2';   // xanh: vượt kế hoạch
        //     //if (p >= 0.7) return '#FFD700'; // vàng: đạt kế hoạch
        //     return '#1dacf2';              // đỏ: không đạt
        // }

        const data3 = {
            labels: labels,
            datasets: [
                {
                    label: 'Vượt kế Hoạch',
                    data: actual,
                    backgroundColor: '#1dacf2',
                    borderRadius: 8,
                    barThickness: 50,
                },
                // {
                //   label: 'Không đạt',
                //   data: [],
                //   backgroundColor: '#D2222D',
                //     borderhieusuat: 8,
                // },
            ]
        };
        const config3 = {
            type: 'bar',
            data: data3,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false,
                        labels: {
                            color: 'white',
                            font: { size: 20, weight: '500' }
                        }
                    },
                    datalabels: {
                        color: 'white',
                        anchor: 'center',
                        align: 'center',
                        formatter: (value, ctx) => {
                            if (ctx.dataset.label === 'Thực tế') {
                                const index = ctx.dataIndex;
                                return actual[index] + ' (' + (percents[index] * 100).toFixed(0) + '%)';
                            }
                            return value;
                        },
                        font: {
                            weight: '500',
                            size: 20
                        }
                    }
                },
                scales: {
                    x: {
                        stacked: true,
                        ticks: { color: 'white', font: { size: 20, weight: '500' } }
                    },
                    y: {
                        stacked: true,
                        beginAtZero: true,
                        suggestedMax: 280,
                        ticks: { color: 'white', font: { size: 20, weight: '500' } },
                        title: { display: true, text: 'Số lượng', color: 'white' }
                    }
                }
            },
            plugins: [
                ChartDataLabels,
                {
                    id: 'targetLine',
                    afterDraw: (chart) => {
                        const yScale = chart.scales.y;
                        const ctx = chart.ctx;
                        const y = yScale.getPixelForValue(plan);
                        ctx.save();
                        ctx.beginPath();
                        ctx.moveTo(chart.chartArea.left, y);
                        ctx.lineTo(chart.chartArea.right, y);
                        ctx.lineWidth = 2;
                        ctx.strokeStyle = '#e373e5';
                        ctx.stroke();
                        ctx.fillStyle = '#e373e5';
                        ctx.fillText(plan, chart.chartArea.right - 50, y - 20);
                        ctx.restore();
                    }
                }
            ]
        };


        new Chart(document.getElementById('canbangchuyen')
            , config3)

    </script>

    <script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
    <script>
        var chart = echarts.init(document.getElementById('hieusuat'));
        var option = {
            series: [{
                type: 'gauge', radius: '100%', center: ['50%', '60%'],
                startAngle: 225,
                endAngle: -45,
                min: 0,
                max: 100,
                splitNumber: 5, //độ chia vachk
                itemStyle: {
                    color: '#1dacf2',
                },
                progress: {
                    show: true,
                    width: 40
                },
                axisLine: {
                    lineStyle: {
                        width: 40,
                        color: [
                        //    [0.4, '#1dacf2'], // 0–100 (0 → 50%) xanh
                          //  [0.45, 'grey'], // 100–160 (50% → 80%) vàng
                            [1, 'rgb(128,128,128,0.2)']    // 160–200 (80% → 100%) đỏ
                        ],
                    }
                },
                pointer: {
                    show: true,
                    length: '60%',
                    width: 12
                },
                axisTick: {
                    show: true,
                    splitNumber: 10,
                    length: 6,
                    lineStyle: { color: '#fff' }
                },
                splitLine: {
                    show: true,
                    length: 10,
                    lineStyle: { color: '#fff', width: 3 }
                },
                axisLabel: {
                    show: true,
                    distance: 45,
                    color: '#fff',
                    fontSize: 20
                },
                detail: {
                    valueAnimation: true,
                    fontSize: 30,
                    formatter: '{value}%',
                    color: '#fff',
                },
                data: [{ value: 85 }]
            }]
        };
        chart.setOption(option);
        window.addEventListener('resize', function () {
            chart.resize();
        });
    </script>
</body>

</html>